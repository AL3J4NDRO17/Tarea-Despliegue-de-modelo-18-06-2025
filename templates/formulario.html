<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clasificador de Insectos</title>
  <style>
    body {
      display: flex;
      min-height: 100vh;
      align-items: center;
      justify-content: center;
      background-color: #f3f4f6; /* bg-gray-100 */
      padding: 1rem; /* p-4 */
      font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
    }

    .card {
      width: 100%;
      max-width: 28rem; /* max-w-md */
      border-radius: 0.5rem; /* rounded-lg */
      background-color: #fff; /* bg-white */
      padding: 1.5rem; /* p-6 */
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1); /* shadow-md */
    }

    h1 {
      margin-bottom: 1rem; /* mb-4 */
      text-align: center;
      font-size: 1.5rem; /* text-2xl */
      font-weight: 700; /* font-bold */
      color: #1f2937; /* text-gray-800 */
    }

    .description {
      margin-bottom: 1.5rem; /* mb-6 */
      text-align: center;
      color: #4b5563; /* text-gray-600 */
    }

    .form-group {
      margin-bottom: 1.5rem; /* space-y-6 para los divs hijos */
    }

    .form-group:last-of-type {
      margin-bottom: 0; /* Eliminar margen inferior del último grupo para que el botón no tenga doble margen */
    }

    label {
      margin-bottom: 0.25rem; /* mb-1 */
      display: block;
      font-size: 0.875rem; /* text-sm */
      font-weight: 500; /* font-medium */
      color: #374151; /* text-gray-700 */
    }

    input[type="number"] {
      display: block;
      width: 100%;
      border-radius: 0.375rem; /* rounded-md */
      border: 1px solid #d1d5db; /* border border-gray-300 */
      padding: 0.5rem 0.75rem; /* py-2 px-3 */
      box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
      outline: none; /* focus:outline-none */
    }

    input[type="number"]:focus {
      border-color: #3b82f6; /* focus:border-blue-500 */
      box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5); /* focus:ring-blue-500 con un offset simulado */
    }

    button[type="submit"] {
      width: 100%;
      border-radius: 0.375rem; /* rounded-md */
      background-color: #000; /* bg-black */
      padding: 0.5rem 1rem; /* py-2 px-4 */
      font-size: 0.875rem; /* text-sm */
      font-weight: 500; /* font-medium */
      color: #fff; /* text-white */
      box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
      cursor: pointer;
      transition: background-color 0.15s ease-in-out, opacity 0.15s ease-in-out;
      outline: none; /* focus:outline-none */
    }

    button[type="submit"]:hover {
      background-color: #1f2937; /* hover:bg-gray-800 */
    }

    button[type="submit"]:focus {
      box-shadow: 0 0 0 2px #3b82f6, 0 0 0 4px rgba(59, 130, 246, 0.5); /* focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 */
    }

    button[type="submit"]:disabled {
      opacity: 0.5; /* disabled:opacity-50 */
      cursor: not-allowed;
    }

    .result-text {
      margin-top: 1.5rem; /* mt-6 */
      text-align: center;
      font-size: 1.125rem; /* text-lg */
      font-weight: 600; /* font-semibold */
    }

    .text-green {
      color: #16a34a; /* text-green-600 */
    }

    .text-red {
      color: #dc2626; /* text-red-600 */
    }
  </style>
  <script>
    async function clasificarInsecto(event) {
      event.preventDefault();
      const abdomenInput = document.getElementById('abdomen');
      const antenaInput = document.getElementById('antena');
      const resultadoParrafo = document.getElementById('resultado');
      const submitButton = document.getElementById('submit-button');

      const abdomen = abdomenInput.value;
      const antena = antenaInput.value;

      resultadoParrafo.innerText = ''; // Limpiar resultados anteriores
      resultadoParrafo.classList.remove('text-green', 'text-red'); // Usar las nuevas clases CSS
      submitButton.disabled = true;
      submitButton.innerText = 'Clasificando...';

      try {
        // Nota: Esta ruta '/predict' necesitaría un backend para funcionar.
        // Para que este HTML sea completamente autónomo y funcional en el navegador,
        // la lógica de clasificación debería estar aquí mismo en JavaScript.
        // Por ahora, simularé una respuesta.
        const response = await new Promise(resolve => setTimeout(() => {
          const abdomenNum = parseFloat(abdomen);
          const antenaNum = parseFloat(antena);

          if (isNaN(abdomenNum) || isNaN(antenaNum)) {
            resolve({ ok: false, json: () => Promise.resolve({ error: "Por favor, introduce valores numéricos válidos." }) });
            return;
          }

          let categoria = "Otro Insecto";
          if (abdomenNum > 60 && antenaNum > 30) {
            categoria = "Mariposa";
          } else if (abdomenNum <= 60 && abdomenNum > 30 && antenaNum > 20) {
            categoria = "Abeja";
          } else if (abdomenNum <= 30 && antenaNum <= 15) {
            categoria = "Hormiga";
          } else if (abdomenNum > 40 && antenaNum <= 20) {
            categoria = "Escarabajo";
          }

          resolve({ ok: true, json: () => Promise.resolve({ categoria: categoria }) });
        }, 1000)); // Simula un retraso de red de 1 segundo

        const data = await response.json();

        if (!response.ok) {
          resultadoParrafo.innerText = 'Error: ' + (data.error || 'Error desconocido al clasificar el insecto.');
          resultadoParrafo.classList.add('text-red');
        } else {
          resultadoParrafo.innerText = 'El insecto es un/a ' + data.categoria;
          resultadoParrafo.classList.add('text-green');
        }
      } catch (error) {
        resultadoParrafo.innerText = 'Error en la solicitud. Por favor, inténtalo de nuevo.';
        resultadoParrafo.classList.add('text-red');
        console.error('Error:', error);
      } finally {
        submitButton.disabled = false;
        submitButton.innerText = 'Clasificar';
      }
    }
  </script>
</head>
<body class="flex min-h-screen items-center justify-center bg-gray-100 p-4">
  <div class="card">
    <h1>Clasificador de Insectos</h1>
    <p class="description">Introduce las medidas del insecto para clasificarlo.</p>
    <form id="formulario" onsubmit="clasificarInsecto(event)">
      <div class="form-group">
        <label for="abdomen">Longitud del Abdomen (mm)</label>
        <input
          type="number"
          id="abdomen"
          name="abdomen"
          placeholder="Ej: 50"
          required
        >
      </div>
      <div class="form-group">
        <label for="antena">Tamaño de la Antena (mm)</label>
        <input
          type="number"
          id="antena"
          name="antena"
          placeholder="Ej: 25"
          required
        >
      </div>
      <button
        type="submit"
        id="submit-button"
      >
        Clasificar
      </button>
    </form>
    <p id="resultado" class="result-text" aria-live="polite"></p>
  </div>
</body>
</html>
